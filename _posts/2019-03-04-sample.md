---
title: "Sample"
layout: single
excerpt: "Primeras aproximaciones a la graficacion por medio de d3"
sitemap: false
permalink: /sample/barras.html
date: 2019-03-04
tags: [data visualization, data science, sample]
mathjax: "true"
---

El poder mostrar los datos de forma correcta resulta vital a la hora de poder entender el trabajo que
hay detrás de todo gran proyecto de Data Science hoy en día. Es por esto que el poder comprender las
diversas herramientas que existen hoy en día para poder realizar una visualización de estos ha ido
en aumento en el último tiempo.

A continuación se mostrarán de forma simplificada los pasos para poder realizar un gráfico de barras
como se muestra en la siguiente figura

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Barras v5</title>
	<script src="https://d3js.org/d3.v5.min.js"></script>
	<link rel="stylesheet" type="text/css" href="../assets/css/barras.css">
</head>
<body>
	<div id="chart"></div>
	<script type="text/javascript">
		var margin = {top: 20, right: 60, bottom: 30, left: 60}, // dimensiones
			chartWidth = 700,
			chartHeight = 380,
			width = chartWidth - margin.left - margin.right,
			height = chartHeight - margin.top - margin.bottom;
		//
		var svg = d3.select("#chart") // seleccionamos html con id chart
					.append('svg') // svg para la visualizacion
					.attr('height', chartHeight)
					.attr('width', chartWidth)
					.append("g") // group
					.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
		//
		var xScale = d3.scaleBand() // generamos escalas de las barras en v5
					.rangeRound([0, width])
					.padding(0.2); // separacion
		//
		var yScale = d3.scaleLinear() // escala linear en v5 para el eje y
					.rangeRound([height, 0]);
		//
		d3.csv("https://gist.githubusercontent.com/beayancan/6dfb28398c4d70d59995f34e06b3904b/raw/d2b43603be81992d36b3340a4e088f8af8a5736b/carreras.csv").then(data => { // tomamos los datos del csv de forma asincrona
		//
		xScale.domain(data.map(d => d.Run)); // les entregamos el dominio a las escalas según los datos
		yScale.domain([0, d3.max(data, d => +d.Speed)]).nice();
		//
		svg.selectAll("rect") // añadimos los datos generamos
			.data(data)
			.enter().append("rect") // utilizaremos rectangulos
			.attr("class", "bar") // para el estilo
			.attr("x", d => xScale(d.Run)) // entregamos los valores
			.attr("y", d => yScale(+d.Speed))
			.attr("width", xScale.bandwidth()) // posicion
			.attr("height", d => height - yScale(+d.Speed));
		//
		svg.append("g") // añadimos los ejes
			.attr("transform", "translate(0," + height + ")") // en la parte inferior
			.call(d3.axisBottom(xScale));
		//
		svg.append("text") // label para el eje
			.attr("transform", "translate (" + width/2 +"," + (height + 30) + ")")
			.style("font-size", "14px")
			.text("Carrera");
		//
		svg.append("g") // añadimos el eje y
			.call(d3.axisLeft(yScale))
			.append("text") // con su label
			.attr("fill", "#000")
			.attr("transform", "rotate(-90)") // lo rotamos
			.attr("x", -height/3)
			.attr("y", -margin.left*2/3)
			.style("font-size", "14px")
			.text("Velocidad");
		});
	</script>
</body>
</html>

### Librería d3.js

El principal instrumento del cual se hará uso corresponde a la librería `d3.js`, la cual
*open source* y puede ser importada fácilmente en nuestro proyecto

```html
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Gráfico</title>

	<!-- Con la siguiente linea ya nos será posible
	acceder a las funciones de d3 -->
	<script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
	<!-- Código -->
</body>
<html>
```